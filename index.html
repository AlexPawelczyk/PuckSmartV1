<!DOCTYPE html>
<meta charset="utf-8">
<style>

/*set the axis line color, dot stroke, font size, and font position*/
body {
  font: 15px sans-serif;
}

.name{
  position: relative;
  top: 90px;
  text-align: left;
  font-weight: bold;
}

.title {
  position: relative;
  text-align: left;
  font-size: 25px;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.dot {
  stroke: black;
}

.sqr {
    stroke: black;
}

.diam {
    stroke: black;
}

.cross {
    stroke: black;
}

#legendSvg {
    transform: translate(1240px, -545px);
}

#filter {
  position: absolute;
  left: 50px;
  top : 680px;
}

#homeFilter {
    position: absolute;
    left: 125px;
    top : 680px;
}

#homeName {
    position: absolute;
    left: 50px;
    
}

#homePlayers {
    position: absolute;
    left: 50px;
    top: 20px;
}
#awayFilter {
    position: absolute;
    left: 250px;
    top : 680px;
}

#awayName {
    position: absolute;
    left: 50px;
}

#awayPlayers {
    position: absolute;
    left: 50px;
    top: 20px;
}



#mark {
  padding-left: 150px;
  position: inherit;
}

#xAXs {
  position: relative;
  /*left: 290px;*/
  left: 140px;
  transform: translateY(30px);
}

#yAXs {
position: relative;
transform: translateY(30px);
/*left: 315px;*/
left: 165px;

}

#label {
position: absolute;
top: 599px;
bottom: 125px;
/*left: 300px; */
left: 150px;
right: 0px;
}

#label2 {
position: absolute;
top: 599px;
bottom: 125px;
/*left: 430px;*/
left: 268px;  /* slight adjustment to align */
right: 0px;
}

#link-simulation {
    position: absolute;
    top: 80px;
    bottom: 125px;
    left: 900px;  /* slight adjustment to align */
    right: 0px;
}

</style>

<body>
<h1>PuckSmart Shot Map View</h1>
<h2>2015-2016 Stanley Cup Finals - Game 5 - Pittsburgh Penguins vs. San Jose Sharks</h2>
<a href="playground.html" id="link-simulation">Go to the simulation view</a>

<script src="d3.v5.min.js"></script>
<script src="importData.js"></script>
<script>
// Source: http://plnkr.co/edit/qNjaUD1ssXIcajqrlHv0?p=preview

var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 1260 - margin.left - margin.right,
    height = 560 - margin.top - margin.bottom;

var x = d3.scaleLinear()
    .range([0, width])
    .domain([0, width]);

var y = d3.scaleLinear()
    .range([height, 0])
    .domain([height, 0]);

/*var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");*/

var xAxisTicks = d3.axisBottom(x);
var xAxisNoTicks = d3.axisBottom(x).ticks(0);
var yAxisTicks = d3.axisLeft(y);
var yAxisNoTicks = d3.axisLeft(y).ticks(0);


var svg = d3.select("body").append("svg")
    .attr("width", width + 350 + margin.left + margin.right) // +350 makes room for legend
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var svgLegend = d3.select("body").append("svg")
    .attr("id", "legendSvg")
    .attr("width", 300)
    .attr("height", 200)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    //.attr("transform", "translate(" + (margin.left + 1300) + "," + margin.top + ")");
    //.attr("transform", "translate(" + margin.left + 1200 + "," + margin.top + ")");

d3.json("hockeyJSON-PitVsSjs-Game5.json").then(function(data) 
{
    var size = data.liveData.plays.allPlays.length;
    var allPlays = data.liveData.plays.allPlays;
    var scoringPlays = data.liveData.plays.scoringPlays;
    var scoringPlaysIndex = 0;
    console.log("----- Goal 1 -----");
    console.log(scoringPlays);
    var keyEventsArray = [];
    var shotsArray = [];
    var goalsArray = [];
    var hitsArray = [];
    var penaltiesArray = [];
    for(var i = 0; i < allPlays.length; i++)
    {
        // these will be non-key events with value 'NULL' given to player and team names
        if(Object.keys(allPlays[i]).length == 3) 
        {
            //console.log("only 3 attributes.. not a key event");
        } 
        // these will be key events that have player and team names
        else if(allPlays[i].result.eventTypeId.toString().localeCompare("SHOT") == 0 ||
                allPlays[i].result.eventTypeId.toString().localeCompare("HIT") == 0 ||
                allPlays[i].result.eventTypeId.toString().localeCompare("PENALTY") == 0 ||
                allPlays[i].result.eventTypeId.toString().localeCompare("GOAL") == 0)
        {
            // convert x and y coordinates from API format to traditional graphics x and y
            var xCord = Math.abs(allPlays[i].coordinates.x + 100) * 6;
            var yCord = (42.5 - allPlays[i].coordinates.y) * 6;
            console.log(i + ") x: " + xCord + ", y: " + yCord);
            console.log(i + ") x: " + allPlays[i].coordinates.x + ", y: " + allPlays[i].coordinates.y);
            var keyEventObj = {
                event_index: allPlays[i].about.eventIdx, 
                event_typeID: allPlays[i].result.eventTypeId,
                event_description: allPlays[i].result.description,
                event_period: allPlays[i].about.period,
                event_periodTime: allPlays[i].about.periodTime,
                event_periodTimeRemaining: allPlays[i].about.periodTimeRemaining,
                event_xcord: xCord, 
                event_ycord: yCord,
                event_team: allPlays[i].team.name,
                event_player: allPlays[i].players[0] 
            };
            keyEventsArray.push(keyEventObj);
            if(keyEventObj.event_typeID.toString().localeCompare("SHOT") == 0) {
                shotsArray.push(keyEventObj);
            } else if(keyEventObj.event_typeID.toString().localeCompare("GOAL") == 0) {
                goalsArray.push(keyEventObj);
            } else if(keyEventObj.event_typeID.toString().localeCompare("HIT") == 0) {
                hitsArray.push(keyEventObj);
            } else if(keyEventObj.event_typeID.toString().localeCompare("PENALTY") == 0) {
                penaltiesArray.push(keyEventObj);
            }
        }  
    }
    console.log(keyEventsArray);
    console.log(shotsArray);

    

/**************************************************************************
 ********************* START BUILDING THE HOCKEY RINK ********************* 
 **************************************************************************/

    // append x and y axis (also serves as border for the shot map)
    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxisTicks)   // bottom x-axis
    
    svg.append("g")
        .attr("class", "x axis2")
        .call(xAxisNoTicks) // top x-axis

    svg.append("g")
        .attr("class", "y axis")
        .call(yAxisTicks)

    svg.append("g")
        .attr("class", "y axis2")
        .attr("transform", "translate(" + width + ",0)")
        .call(yAxisNoTicks)
  
    // data for lines needed to draw hockey rink
    var jsonMinorLines = [
        // left and right goal lines
        { "x_axis1" : 66, "y_axis1" : 0, "x_axis2" : 66, "y_axis2" : 510, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1134, "y_axis1" : 0, "x_axis2" : 1134, "y_axis2" : 510, "stroke" : "red", "strokeWidth": 1 }, 
        // dot lines for top-left circle
        { "x_axis1" : 174, "y_axis1" : 118, "x_axis2" : 174, "y_axis2" : 100, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 118, "x_axis2" : 151, "y_axis2" : 118, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 128, "x_axis2" : 174, "y_axis2" : 146, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 128, "x_axis2" : 151, "y_axis2" : 128, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 118, "x_axis2" : 198, "y_axis2" : 100, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 118, "x_axis2" : 221, "y_axis2" : 118, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 128, "x_axis2" : 198, "y_axis2" : 146, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 128, "x_axis2" : 221, "y_axis2" : 128, "stroke" : "red", "strokeWidth": 1 },
        // hashmarks for top-left circle
        { "x_axis1" : 168, "y_axis1" : 35, "x_axis2" : 168, "y_axis2" : 23, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 204, "y_axis1" : 35, "x_axis2" : 204, "y_axis2" : 23, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 168, "y_axis1" : 211, "x_axis2" : 168, "y_axis2" : 223, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 204, "y_axis1" : 211, "x_axis2" : 204, "y_axis2" : 223, "stroke" : "red", "strokeWidth": 1 },    
        // dot lines for bottom-left circle
        { "x_axis1" : 174, "y_axis1" : 381, "x_axis2" : 174, "y_axis2" : 363, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 381, "x_axis2" : 151, "y_axis2" : 381, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 393, "x_axis2" : 174, "y_axis2" : 411, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 393, "x_axis2" : 151, "y_axis2" : 393, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 381, "x_axis2" : 198, "y_axis2" : 363, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 381, "x_axis2" : 221, "y_axis2" : 381, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 393, "x_axis2" : 198, "y_axis2" : 411, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 393, "x_axis2" : 221, "y_axis2" : 393, "stroke" : "red", "strokeWidth": 1 },
        // hashmarks for bottom-left circle
        { "x_axis1" : 168, "y_axis1" : 299, "x_axis2" : 168, "y_axis2" : 287, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 204, "y_axis1" : 299, "x_axis2" : 204, "y_axis2" : 287, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 168, "y_axis1" : 475, "x_axis2" : 168, "y_axis2" : 487, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 204, "y_axis1" : 475, "x_axis2" : 204, "y_axis2" : 487, "stroke" : "red", "strokeWidth": 1 },
        // dot lines for top-right circle
        { "x_axis1" : 1002, "y_axis1" : 118, "x_axis2" : 1002, "y_axis2" : 100, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 118, "x_axis2" : 979, "y_axis2" : 118, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 128, "x_axis2" : 1002, "y_axis2" : 146, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 128, "x_axis2" : 979, "y_axis2" : 128, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 118, "x_axis2" : 1026, "y_axis2" : 100, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 118, "x_axis2" : 1049, "y_axis2" : 118, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 128, "x_axis2" : 1026, "y_axis2" : 146, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 128, "x_axis2" : 1049, "y_axis2" : 128, "stroke" : "red", "strokeWidth": 1 },
        // hashmarks for top-right circle
        { "x_axis1" : 996, "y_axis1" : 35, "x_axis2" : 996, "y_axis2" : 23, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1032, "y_axis1" : 35, "x_axis2" : 1032, "y_axis2" : 23, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 996, "y_axis1" : 211, "x_axis2" : 996, "y_axis2" : 223, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1032, "y_axis1" : 211, "x_axis2" : 1032, "y_axis2" : 223, "stroke" : "red", "strokeWidth": 1 },
        // dot lines for bottom-right circle
        { "x_axis1" : 1002, "y_axis1" : 381, "x_axis2" : 1002, "y_axis2" : 363, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 381, "x_axis2" : 979, "y_axis2" : 381, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 393, "x_axis2" : 1002, "y_axis2" : 411, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 393, "x_axis2" : 979, "y_axis2" : 393, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 381, "x_axis2" : 1026, "y_axis2" : 363, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 381, "x_axis2" : 1049, "y_axis2" : 381, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 393, "x_axis2" : 1026, "y_axis2" : 411, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 393, "x_axis2" : 1049, "y_axis2" : 393, "stroke" : "red", "strokeWidth": 1 },
        // hashmarks for bottom-right circle
        { "x_axis1" : 996, "y_axis1" : 299, "x_axis2" : 996, "y_axis2" : 287, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1032, "y_axis1" : 299, "x_axis2" : 1032, "y_axis2" : 287, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 996, "y_axis1" : 475, "x_axis2" : 996, "y_axis2" : 487, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1032, "y_axis1" : 475, "x_axis2" : 1032, "y_axis2" : 487, "stroke" : "red", "strokeWidth": 1 },
        // left & right nets
        { "x_axis1" : 66, "y_axis1" : 237, "x_axis2" : 48, "y_axis2" : 237, "stroke" : "red", "strokeWidth": 1},
        { "x_axis1" : 48, "y_axis1" : 237, "x_axis2" : 48, "y_axis2" : 273, "stroke" : "red", "strokeWidth": 1},
        { "x_axis1" : 66, "y_axis1" : 273, "x_axis2" : 48, "y_axis2" : 273, "stroke" : "red", "strokeWidth": 1},
        { "x_axis1" : 1134, "y_axis1" : 237, "x_axis2" : 1152, "y_axis2" : 237, "stroke" : "red", "strokeWidth": 1},
        { "x_axis1" : 1152, "y_axis1" : 237, "x_axis2" : 1152, "y_axis2" : 273, "stroke" : "red", "strokeWidth": 1},
        { "x_axis1" : 1134, "y_axis1" : 273, "x_axis2" : 1152, "y_axis2" : 273, "stroke" : "red", "strokeWidth": 1},
        // left and right goal lines
        { "x_axis1" : 66, "y_axis1" : 0, "x_axis2" : 66, "y_axis2" : 510, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1134, "y_axis1" : 0, "x_axis2" : 1134, "y_axis2" : 510, "stroke" : "red", "strokeWidth": 1 }, 
        // dot lines for top-left circle
        { "x_axis1" : 174, "y_axis1" : 118, "x_axis2" : 174, "y_axis2" : 100, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 118, "x_axis2" : 151, "y_axis2" : 118, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 128, "x_axis2" : 174, "y_axis2" : 146, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 128, "x_axis2" : 151, "y_axis2" : 128, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 118, "x_axis2" : 198, "y_axis2" : 100, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 118, "x_axis2" : 221, "y_axis2" : 118, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 128, "x_axis2" : 198, "y_axis2" : 146, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 128, "x_axis2" : 221, "y_axis2" : 128, "stroke" : "red", "strokeWidth": 1 },
        // hashmarks for top-left circle
        { "x_axis1" : 168, "y_axis1" : 35, "x_axis2" : 168, "y_axis2" : 23, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 204, "y_axis1" : 35, "x_axis2" : 204, "y_axis2" : 23, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 168, "y_axis1" : 211, "x_axis2" : 168, "y_axis2" : 223, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 204, "y_axis1" : 211, "x_axis2" : 204, "y_axis2" : 223, "stroke" : "red", "strokeWidth": 1 },    
        // dot lines for bottom-left circle
        { "x_axis1" : 174, "y_axis1" : 381, "x_axis2" : 174, "y_axis2" : 363, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 381, "x_axis2" : 151, "y_axis2" : 381, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 393, "x_axis2" : 174, "y_axis2" : 411, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 174, "y_axis1" : 393, "x_axis2" : 151, "y_axis2" : 393, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 381, "x_axis2" : 198, "y_axis2" : 363, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 381, "x_axis2" : 221, "y_axis2" : 381, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 393, "x_axis2" : 198, "y_axis2" : 411, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 198, "y_axis1" : 393, "x_axis2" : 221, "y_axis2" : 393, "stroke" : "red", "strokeWidth": 1 },
        // hashmarks for bottom-left circle
        { "x_axis1" : 168, "y_axis1" : 299, "x_axis2" : 168, "y_axis2" : 287, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 204, "y_axis1" : 299, "x_axis2" : 204, "y_axis2" : 287, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 168, "y_axis1" : 475, "x_axis2" : 168, "y_axis2" : 487, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 204, "y_axis1" : 475, "x_axis2" : 204, "y_axis2" : 487, "stroke" : "red", "strokeWidth": 1 },
        // dot lines for top-right circle
        { "x_axis1" : 1002, "y_axis1" : 118, "x_axis2" : 1002, "y_axis2" : 100, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 118, "x_axis2" : 979, "y_axis2" : 118, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 128, "x_axis2" : 1002, "y_axis2" : 146, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 128, "x_axis2" : 979, "y_axis2" : 128, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 118, "x_axis2" : 1026, "y_axis2" : 100, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 118, "x_axis2" : 1049, "y_axis2" : 118, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 128, "x_axis2" : 1026, "y_axis2" : 146, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 128, "x_axis2" : 1049, "y_axis2" : 128, "stroke" : "red", "strokeWidth": 1 },
        // hashmarks for top-right circle
        { "x_axis1" : 996, "y_axis1" : 35, "x_axis2" : 996, "y_axis2" : 23, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1032, "y_axis1" : 35, "x_axis2" : 1032, "y_axis2" : 23, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 996, "y_axis1" : 211, "x_axis2" : 996, "y_axis2" : 223, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1032, "y_axis1" : 211, "x_axis2" : 1032, "y_axis2" : 223, "stroke" : "red", "strokeWidth": 1 },
        // dot lines for bottom-right circle
        { "x_axis1" : 1002, "y_axis1" : 381, "x_axis2" : 1002, "y_axis2" : 363, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 381, "x_axis2" : 979, "y_axis2" : 381, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 393, "x_axis2" : 1002, "y_axis2" : 411, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1002, "y_axis1" : 393, "x_axis2" : 979, "y_axis2" : 393, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 381, "x_axis2" : 1026, "y_axis2" : 363, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 381, "x_axis2" : 1049, "y_axis2" : 381, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 393, "x_axis2" : 1026, "y_axis2" : 411, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1026, "y_axis1" : 393, "x_axis2" : 1049, "y_axis2" : 393, "stroke" : "red", "strokeWidth": 1 },
        // hashmarks for bottom-right circle
        { "x_axis1" : 996, "y_axis1" : 299, "x_axis2" : 996, "y_axis2" : 287, "stroke" : "red", "strokeWidth": 1 },
        { "x_axis1" : 1032, "y_axis1" : 299, "x_axis2" : 1032, "y_axis2" : 287, "stroke" : "red", "strokeWidth": 1 },  
    ]

    // append lines needed to build shot map
    var minorLines = svg.selectAll("line")
        .data(jsonMinorLines)
        .enter()
        .append("line");

    // record attributes for all lines needed to build shot map
    var minorLineAttributes = minorLines
        .attr("x1", function(d) {
            //console.log(d.x_axis1);
            return d.x_axis1;
        })
        .attr("y1", function(d) {
            return d.y_axis1;
        })
        .attr("x2", function(d) {
            return d.x_axis2;
        })
        .attr("y2", function(d) {
            return d.y_axis2;
        })
        .attr("stroke", function(d) {
            return d.stroke;
        })
        .attr("stroke-width", function(d) {
            return d.strokeWidth;
        });
    
    // data for rectangles needed to draw shot map
    var jsonRectangles = [
        //{ "x_axis" : 0, "y_axis" : 0, "width" : 1200, "height" : 510, "fill" : "white", "stroke" : "black", "strokeWidth": 3, "curve" : 108}, // border of rink
        { "x_axis" : 447, "y_axis" : 0, "width" : 6, "height" : 510, "fill" : "blue", "stroke" : "none", "strokeWidth": 0, "curve" : 0}, // left blue line
        { "x_axis" : 597, "y_axis" : 0, "width" : 6, "height" : 510, "fill" : "red", "stroke" : "none", "strokeWidth": 0, "curve" :0}, // center red line
        { "x_axis" : 747, "y_axis" : 0, "width" : 6, "height" : 510, "fill" : "blue", "stroke" : "none", "strokeWidth": 0, "curve" : 0}, // right blue line
        { "x_axis" : 66, "y_axis" : 231, "width" : 24, "height" : 48, "fill" : "blue", "stroke" : "red", "strokeWidth": 1, "curve" : 0}, // left crease
        { "x_axis" : 1110, "y_axis" : 231, "width" : 24, "height" : 48, "fill" : "blue", "stroke" : "red", "strokeWidth": 1, "curve" : 0}, // right crease
    ]
    
    // append rectangles needed to build shot map
    var rectangles = svg.selectAll("rect")
        .data(jsonRectangles)
        .enter()
        .append("rect");
    
    // record attributes for all rectangles needed to build shot map
    var rectangleAttributes = rectangles
        .attr("x", function(d) {
            return d.x_axis;
        })
        .attr("y", function(d) {
            return d.y_axis;
        })
        .attr("width", function(d) {
            return d.width;
        })
        .attr("height", function(d) {
            return d.height;
        })
        .attr("fill", function(d) {
            return d.fill;
        })
        .attr("stroke", function(d) {
            return d.stroke;
        })
        .attr("stroke-width", function(d) {
            return d.strokeWidth;
        })
        .attr("rx", function(d) {
            return d.curve;
        });
    
    // data for circles needed to draw hockey rink
    var jsonCircles = [
        // center-ice circle
        { "x_axis": 600, "y_axis": 255, "radius": 90, "color" : "white", "stroke" : "blue", "strokeWidth": 1 },
        { "x_axis": 600, "y_axis": 255, "radius": 3, "color" : "blue", "stroke" : "black", "strokeWidth": 0 },
        // top-left circle
        { "x_axis": 186, "y_axis": 123, "radius": 90, "color" : "white", "stroke" : "red", "strokeWidth": 1 },
        { "x_axis": 186, "y_axis": 123, "radius": 6, "color" : "red", "stroke" : "black", "strokeWidth": 0 },
        // bottom-left circle
        { "x_axis": 186, "y_axis": 387, "radius": 90, "color" : "white", "stroke" : "red", "strokeWidth": 1 },
        { "x_axis": 186, "y_axis": 387, "radius": 6, "color" : "red", "stroke" : "black", "strokeWidth": 0 },
        // top-right circle
        { "x_axis": 1014, "y_axis": 123, "radius": 90, "color" : "white", "stroke" : "red", "strokeWidth": 1 },
        { "x_axis": 1014, "y_axis": 123, "radius": 6, "color" : "red", "stroke" : "black", "strokeWidth": 0 },
        // bottom-right circle
        { "x_axis": 1014, "y_axis": 387, "radius": 90, "color" : "white", "stroke" : "red", "strokeWidth": 1 },
        { "x_axis": 1014, "y_axis": 387, "radius": 6, "color" : "red", "stroke" : "black", "strokeWidth": 0 }
    ]
        
    // append circles
    var circleObjs = svg.selectAll("circle")
        .data(jsonCircles)
        .enter()
        .append("circle");
    
    // record attributes for all circles
    var circleAttributes = circleObjs
        .attr("cx", function(d) { 
            return d.x_axis 
        })
        .attr("cy", function(d) {
            return d.y_axis;
        })
        .attr("r", function(d) {
            return d.radius;
        })
        .attr("fill", function(d) {
            return d.color;
        })
        .attr("stroke", function(d) {
            return d.stroke;
        })
        .attr("stroke-width", function(d) {
            return d.strokeWidth;
        });


    /* FINISHED BUILDING RINK.
     * START APPENDING DATA POINTS TO CHART */
    var circles = appendShots(shotsArray, svg);
    var squares = appendHits(hitsArray, svg);
    var diamonds = appendGoals(goalsArray, svg);
    var crosses = appendPenalties(penaltiesArray, svg);
    
    
    /* APPEND LEGEND EXPLAINING SHAPES AND COLORS
     * Circle: Shot
     * Square: Hit
     * Diamond: Goal
     * Cross: Penalty
     * 
     * Black: Home Team
     * Grey: Away Team
     */
    
    // title of legend
    svgLegend.append("text")
        .attr("x", 5)
        .attr("y", 17)
        .attr("font-size", 20)
        .text("LEGEND");
    
    // top border of legend
    svgLegend.append("line")
        .attr("x1", 0)
        .attr("y1", 0)
        .attr("x2", 160)
        .attr("y2", 0)
        .attr("stroke", "black");

    // left border of legend
    svgLegend.append("line")
        .attr("x1", 0)
        .attr("y1", 0)
        .attr("x2", 0)
        .attr("y2", 140)
        .attr("stroke", "black");

    // bottom border of legend
    svgLegend.append("line")
        .attr("x1", 0)
        .attr("y1", 140)
        .attr("x2", 160)
        .attr("y2", 140)
        .attr("stroke", "black");
    
    // right border of legend
    svgLegend.append("line")
        .attr("x1", 160)
        .attr("y1", 0)
        .attr("x2", 160)
        .attr("y2", 140)
        .attr("stroke", "black");
    
    // underlining title of legend
    svgLegend.append("line")
        .attr("x1", 0)
        .attr("y1", 20)
        .attr("x2", 160)
        .attr("y2", 20)
        .attr("stroke", "black");
    
    // seperating shapes and colors sections of legend
    svgLegend.append("line")
        .attr("x1", 0)
        .attr("y1", 100)
        .attr("x2", 160)
        .attr("y2", 100)
        .attr("stroke", "black");

    svgLegend.append("circle")
            .attr("class", "dot")
            .attr("r", 5)
            //.attr("cx", function(d) { return x(d.xCord); })
            //.attr("cy", function(d) { return y(d.yCord); })
            .attr("cx", 10)
            .attr("cy", 30)
            .style("fill", "white")
            .style("stroke", "black");
    
    svgLegend.append("text")
        .attr("x", 20)
        .attr("y", 35)
        .text("Shot");
    
    svgLegend.append("polygon")
        .attr("points", function() { 
            var pointStr = "";
            pointStr += 10 + "," + (50 - 5) + " ";
            pointStr += (10 + 5) + "," + 50 + " ";
            pointStr += 10 + "," + (50 + 5) + " ";
            pointStr += (10 - 5) + "," + 50;
            return pointStr;
        })
        .style("fill", "white")
        .style("stroke", "black");
    
    svgLegend.append("text")
        .attr("x", 20)
        .attr("y", 55)
        .text("Goal");
    
    svgLegend.append("rect")
        .attr("x", 5)
        .attr("y", 65)
        .attr("width", 10)
        .attr("height", 10)
        .style("fill", "white")
        .style("stroke", "black");
    
    svgLegend.append("text")
        .attr("x", 20)
        .attr("y", 75)
        .text("Hit");
    
    svgLegend.append("polygon")
        .attr("points", function(d) { 
            var pointStr = "";
            pointStr += (10) + "," + (90-5) + " ";
            pointStr += (10+5) + "," + (90+5) + " ";
            pointStr += (10-5) + "," + (90+5) + " ";
            return pointStr;
            // var pointStr = "";
            // pointStr += (10 + 2) + "," + (90 - 5) + " ";
            // pointStr += (10 + 2) + "," + (90 - 2) + " ";
            // pointStr += (10 + 5) + "," + (90 - 2) + " ";
            // pointStr += (10 + 5) + "," + (90 + 2) + " ";

            // pointStr += (10 + 2) + "," + (90 + 2) + " ";
            // pointStr += (10 + 2) + "," + (90 + 5) + " ";
            // pointStr += (10 - 2) + "," + (90 + 5) + " ";
            // pointStr += (10 - 2) + "," + (90 + 2) + " ";

            // pointStr += (10 - 5) + "," + (90 + 2) + " ";
            // pointStr += (10 - 5) + "," + (90 - 2) + " ";
            // pointStr += (10 - 2) + "," + (90 - 2) + " ";
            // pointStr += (10 - 2) + "," + (90 - 5) + " ";
            // return pointStr;
        })
        .style("fill", "white")
        .style("stroke", "black");
    
    svgLegend.append("text")
        .attr("x", 20)
        .attr("y", 95)
        .text("Penalty");
    
    svgLegend.append("circle")
        .attr("class", "dot")
        .attr("r", 5)
        //.attr("cx", function(d) { return x(d.xCord); })
        //.attr("cy", function(d) { return y(d.yCord); })
        .attr("cx", 10)
        .attr("cy", 110)
        .style("fill", "orange")
        .style("stroke", "orange")
        .style("opacity", 0.5);
    
    svgLegend.append("text")
        .attr("x", 20)
        .attr("y", 115)
        .text("Pittsburgh Penguins");
    
    svgLegend.append("circle")
        .attr("class", "dot")
        .attr("r", 5)
        //.attr("cx", function(d) { return x(d.xCord); })
        //.attr("cy", function(d) { return y(d.yCord); })
        .attr("cx", 10)
        .attr("cy", 130)
        .style("fill", "silver")
        .style("stroke", "silver")
        .style("opacity", 0.5);
    
    svgLegend.append("text")
        .attr("x", 20)
        .attr("y", 135)
        .text("San Jose Sharks");
    
    
    
/*
    legend.append("rect")
        .attr("x", width - 18)
        .attr("width", 18)
        .attr("height", 18)
        .style("fill", color);

    legend.append("text")
        .attr("x", width - 24)
        .attr("y", 9)
        .attr("dy", ".35em")
        .style("text-anchor", "end")
        .text(function(d) { return d; }); */

    /* FILTER EVENTS WHEN CHECKBOXES ARE CLICKED & UNCLICKED */
    d3.selectAll("[name=v]").on("change", function()
    {
        var selected = this.value;
        var display = this.checked ? "inline" : "none";
        console.log(selected + " || " + display)

        if(selected.toString().localeCompare("SHOT") == 0) {            
            filterEvent(shotsArray, svg, ".dot", selected, display);
        } else if(selected.toString().localeCompare("GOAL") == 0) {
            filterEvent(goalsArray, svg, ".diam", selected, display);
        } else if(selected.toString().localeCompare("HIT") == 0) {
            filterEvent(hitsArray, svg, ".sqr", selected, display);
        } else if(selected.toString().localeCompare("PENALTY") == 0) {
            filterEvent(penaltiesArray, svg, ".cross", selected, display);
        }
    });

    /*
    d3.selectAll("[name=sepal]").on("change", function(d) {
        radius = this.value;
        svg.selectAll(".dot")
        console.log(radius);
        circles.attr("r", function(d) { return d[radius]; });
    });
    */

    d3.select("[name=xAX]").on("change", function(){
        /*
        xAxy = this.value;
        console.log(xAxy)
        x.domain(d3.extent(data, function(d) { return d[xAxy]; })).nice();

        svg.select(".x.axis").transition().call(xAxis);

        svg.selectAll(".dot").transition().attr("cx", function(d) { 
            return x(d[xAxy]);
        });
        svg.selectAll(".x.axis").selectAll("text.label").text(axisNames[xAxy] + " (cm)");
        */
    });

    d3.select("[name=yAX]").on("change", function(){
        /*
        yAxy = this.value;
        console.log(yAxy)
        y.domain(d3.extent(data, function(d) { return d[yAxy]; })).nice();
        svg.select(".y.axis").transition().call(yAxis);
        svg.selectAll(".dot").transition().attr("cy", function(d) { 
            return y(d[yAxy]);
        });
        svg.selectAll(".y.axis").selectAll("text.label").text(axisNames[yAxy] + " (cm)");
        */
    });


    /**************************************************************
     ******************** FUNCTION DEFINITIONS ********************
     **************************************************************/
    function appendShots(inputArray, targetSvg) 
    {
        return targetSvg.selectAll(".dot")
            .data(shotsArray)
            .enter().append("circle")
            .attr("class", "dot")
            .attr("r", 4)
            //.attr("cx", function(d) { return x(d.xCord); })
            //.attr("cy", function(d) { return y(d.yCord); })
            .attr("cx", function(d) { return x(d.event_xcord); })
            .attr("cy", function(d) { return y(d.event_ycord); })
            .style("fill", function(d) {
                if(d.event_team.toString().localeCompare("Pittsburgh Penguins") == 0)
                {
                    return "orange";
                }
                else if(d.event_team.toString().localeCompare("San Jose Sharks") == 0)
                {
                    return "silver";
                }
                else
                {
                    return "yellow";
                }
            //return color(d.event_typeID); 
            })
            .style("stroke", "black")
            .style("opacity", 0.5)
            // Here we add an SVG title element the contents of which is effectively rendered in a tooltip   
            .append("svg:title")
            .text(function(d) { 
                return  "Event: " + d.event_typeID +
                        "\nPeriod: " + d.event_period +  
                        "\nTime: " + d.event_periodTime +
                        "\nDescription: " + d.event_description;
            });
    }

    function appendHits(inputArray, targetSvg)
    {
        return targetSvg.selectAll(".sqr")
            .data(hitsArray)
            .enter().append("rect")
            .attr("class", "sqr")
            .attr("x", function(d) { return x(d.event_xcord) - 4;})
            .attr("y", function(d) { return y(d.event_ycord) - 4;})
            .attr("width", 8)
            .attr("height", 8)
            .style("fill", function(d) {
                if(d.event_team.toString().localeCompare("Pittsburgh Penguins") == 0)
                {
                    return "orange";
                }
                else if(d.event_team.toString().localeCompare("San Jose Sharks") == 0)
                {
                    return "silver";
                }
                else
                {
                    return "yellow";
                }
            })
            .style("stroke", "black")
            .style("opacity", 0.5)
            // Here we add an SVG title element the contents of which is effectively rendered in a tooltip   
            .append("svg:title")
            .text(function(d) { 
                return  "Event: " + d.event_typeID +
                        "\nPeriod: " + d.event_period +  
                        "\nTime: " + d.event_periodTime +
                        "\nDescription: " + d.event_description;
            });
    }

    function appendGoals(inputArray, targetSvg)
    {
        return targetSvg.selectAll(".diam")
            .data(inputArray)
            .enter().append("polygon")
            .attr("class", "diam")
            .attr("points", function(d) { 
                var pointStr = "";
                pointStr += d.event_xcord + "," + (d.event_ycord - 4) + " ";
                pointStr += (d.event_xcord + 4) + "," + d.event_ycord + " ";
                pointStr += d.event_xcord + "," + (d.event_ycord + 4) + " ";
                pointStr += (d.event_xcord - 4) + "," + d.event_ycord;
                return pointStr;
            })
            .style("fill", function(d){
                if(d.event_team.toString().localeCompare("Pittsburgh Penguins") == 0)
                {
                    return "orange";
                }
                else if(d.event_team.toString().localeCompare("San Jose Sharks") == 0)
                {
                    return "silver";
                }
                else
                {
                    return "yellow";
                }
            })
            .style("stroke", "black")
            .style("opacity", 0.5)
            // Here we add an SVG title element the contents of which is effectively rendered in a tooltip   
            .append("svg:title")
            .text(function(d) { 
                return  "Event: " + d.event_typeID +
                        "\nPeriod: " + d.event_period +  
                        "\nTime: " + d.event_periodTime +
                        "\nDescription: " + d.event_description;
            });
    }

    function appendPenalties(inputArray, targetSvg)
    {
        return targetSvg.selectAll(".cross")
            .data(inputArray)
            .enter().append("polygon")
            .attr("class", "cross")
            .attr("points", function(d) { 
                var pointStr = "";
                pointStr += (d.event_xcord) + "," + (d.event_ycord - 4) + " ";
                pointStr += (d.event_xcord + 4) + "," + (d.event_ycord + 4) + " ";
                pointStr += (d.event_xcord - 4) + "," + (d.event_ycord + 4) + " ";
                return pointStr;
                // var pointStr = "";
                // pointStr += (d.event_xcord + 2) + "," + (d.event_ycord - 4) + " ";
                // pointStr += (d.event_xcord + 2) + "," + (d.event_ycord - 2) + " ";
                // pointStr += (d.event_xcord + 4) + "," + (d.event_ycord - 2) + " ";
                // pointStr += (d.event_xcord + 4) + "," + (d.event_ycord + 2) + " ";

                // pointStr += (d.event_xcord + 2) + "," + (d.event_ycord + 2) + " ";
                // pointStr += (d.event_xcord + 2) + "," + (d.event_ycord + 4) + " ";
                // pointStr += (d.event_xcord - 2) + "," + (d.event_ycord + 4) + " ";
                // pointStr += (d.event_xcord - 2) + "," + (d.event_ycord + 2) + " ";

                // pointStr += (d.event_xcord - 4) + "," + (d.event_ycord + 2) + " ";
                // pointStr += (d.event_xcord - 4) + "," + (d.event_ycord - 2) + " ";
                // pointStr += (d.event_xcord - 2) + "," + (d.event_ycord - 2) + " ";
                // pointStr += (d.event_xcord - 2) + "," + (d.event_ycord - 4) + " ";
                // return pointStr;
            })
            .style("fill", function(d) {
                if(d.event_team.toString().localeCompare("Pittsburgh Penguins") == 0)
                {
                    return "orange";
                }
                else if(d.event_team.toString().localeCompare("San Jose Sharks") == 0)
                {
                    return "silver";
                }
                else
                {
                    return "yellow";
                }
            })
            .style("stroke", "black")
            .style("opacity", 0.5)
            // Here we add an SVG title element the contents of which is effectively rendered in a tooltip   
            .append("svg:title")
            .text(function(d) { 
                return  "Event: " + d.event_typeID +
                        "\nPeriod: " + d.event_period +  
                        "\nTime: " + d.event_periodTime +
                        "\nDescription: " + d.event_description;
            });
    }

    function appendTooltipText(inputArray)
    {
        return  "Period: " + d.event_period +  
                "\nTime: " + d.event_periodTime +
                "\nDescription: " + d.event_description;
    }

    function filterEvent(inputArray, targetSvg, classIdentifier, eventSelected, boolDisplay)
    {
       svg.selectAll(classIdentifier)
                .data(inputArray)
                .filter(function(d) {return eventSelected == d.event_typeID})
                .attr("display", boolDisplay);
    }
   
});

// Create Event Handlers for mouse
function handleMouseOver(d, i) {  // Add interactivity

    // Use D3 to select element, change color and size
    d3.select(this).attr(
    {
        fill: "yello",
        r: radius * 2
    });
/*
    // Specify where to put label of text
    svg.append("text").attr({
    id: "t" + d.x + "-" + d.y + "-" + i,  // Create an id for text so we can select it later for removing on mouseout
        x: function() { return xScale(d.x) - 30; },
        y: function() { return yScale(d.y) - 15; }
    })
    .text(function() {
    return [d.x, d.y];  // Value of the text
    });
*/
}


</script>
<br><br>
    <div id="filter">
        <b>Event Filter:</b>
        <br>
        <input name='v' value="SHOT" type="checkbox" checked>Shot
        </input>
            <br>
        <input name="v" value="GOAL" type="checkbox" checked >Goal
        </input>
            <br>
        <input name="v" value="HIT" type="checkbox" checked >Hit
        </input>
            <br>
        <input name="v" value="PENALTY" type="checkbox" checked >Penalty
        </input>
        <br>
    </div>

    <div id="homeFilter">
        <b id="homeName">Pittsburgh</b>
        <select name="homePlayer" id="homePlayers">
            <option value ="allPlayers">All Players</option>
            <option value ="player1">Player 1</option>
            <option value ="player2">Player 2</option>
            <option value ="player3">Player 3</option>
        </select>
    </div>

    <div id="awayFilter">
        <b id="awayName">SanJose</b>
        <select name="awayPlayer" id="awayPlayers">
            <option value ="allPlayers">All Players</option>
            <option value ="player1">Player 1</option>
            <option value ="player2">Player 2</option>
            <option value ="player3">Player 3</option>
        </select>
    </div>


<!--
  <form id="mark">
    <b>Size of Mark:</b>
    <div><input type="radio" name="sepal" value='sepalWidth'>Sepal Width</div>
    <div><input type="radio" name="sepal" value="sepalLength">Sepal Length</div>
  </form> 
-->
<!--
<div id="label"><b id="home">San Jose</b></div>
    <select name="xAX" id="xAXs">
        <option value ="allPlayers">All Players</option>
        <option value ="player1">Player 1</option>
        <option value ="player2">Player 2</option>
        <option value ="player3">Player 3</option>
    </select>

<div id="label2"><b id="home">Pittsburg</b></div>
    <select name="yAX" id="yAXs">
        <option value ="allPlayers">All Players</option>
        <option value ="player1">Player 1</option>
        <option value ="player2">Player 2</option>
        <option value ="player3">Player 3</option>
    </select>  

<div id="legend">
    <h3>legend</h3>
</div>
-->
  <br>
</body>
